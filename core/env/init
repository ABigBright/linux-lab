LAB_ENV_ID=/home/$(USER)/Desktop/lab.desktop
ifneq ($(LAB_ENV_ID),$(wildcard $(LAB_ENV_ID)))
  ifneq (../../configs/linux-lab, $(wildcard ../../configs/linux-lab))
    $(error ERR: No Cloud Lab found, please refer to 'Download the lab' part of README.md)
  else
    $(error ERR: Please not try Linux Lab in local host, but use it with Cloud Lab, please refer to 'Run and login the lab' part of README.md)
  endif
endif

# Check running user, must as ubuntu
ifeq ($(TEST_TIMEOUT),)
  ifneq ($(shell whoami),$(USER))
    $(error ERR: Must run Linux Lab as general user: '$(USER)', not use it as root, please try 'su ubuntu'.)
  endif
endif

# Check permission issue, must available to ubuntu
ifneq ($(shell stat -c '%U' /.git/HEAD),$(USER))
  $(error ERR: Must make sure Cloud Lab and Linux Lab **NOT** belong to user: 'root', please change their owner in host: 'sudo chown $$USER:$$USER -R /path/to/cloud-lab')
endif
